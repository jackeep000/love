<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>❤️</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
      font-family: 'Arial', sans-serif;
      overflow: hidden;
    }
    .card {
      background: rgba(255, 255, 255, 0.9);
      padding: 40px;
      border-radius: 30px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.1);
      text-align: center;
      z-index: 10;
      min-width: 320px;
    }
    h1 {
      color: #d63384;
      font-size: 1.8rem;
      margin-bottom: 30px;
    }
    .btn-group {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 20px;
      height: 60px;
    }
    button {
      padding: 12px 30px;
      font-size: 1.1rem;
      border: none;
      border-radius: 25px;
      cursor: pointer;
      font-weight: bold;
      transition: transform 0.2s;
    }
    #yesBtn {
      background-color: #ff4d6d;
      color: white;
      box-shadow: 0 4px 10px rgba(255, 77, 109, 0.2);
    }
    #noBtn {
      background-color: #adb5bd;
      color: white;
      transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.1);
    }
    #noWrapper {
      position: relative;
    }
    .heart-bg {
      position: absolute;
      color: rgba(255, 77, 109, 0.2);
      font-size: 20px;
      pointer-events: none;
      animation: float 6s linear infinite;
    }
    @keyframes float {
      0% { transform: translateY(110vh) rotate(0deg); opacity: 1; }
      100% { transform: translateY(-10vh) rotate(360deg); opacity: 0; }
    }
    .hidden { display: none; }
    #final h1 { font-size: 2.5rem; color: #d63384; }
  </style>
</head>
<body>
<div id="bg"></div>
<div class="card" id="quiz">
  <h1>Ты будешь моей валентинкой? ❤️</h1>
  <div class="btn-group">
    <button id="yesBtn">ДА!</button>
    <div id="noWrapper">
      <button id="noBtn">Нет</button>
    </div>
  </div>
</div>
<div class="card hidden" id="final">
  <h1>Я люблю тебя  >///<
    ты самая лучшая девушка и теперь ты моя валентинка) ❤️</h1>

  <p style="font-size: 1.2rem; color: #555;">*шлеп попеенцию!*</p>
</div>

<script>
  const no = document.getElementById('noBtn');
  const yes = document.getElementById('yesBtn');
  const card = document.getElementById('quiz');
  const final = document.getElementById('final');
  const bg = document.getElementById('bg');
  const noWrapper = document.getElementById('noWrapper');

  let lastTeleport = 0;

  function teleport() {
    const now = Date.now();
    if (now - lastTeleport < 300) return;
    lastTeleport = now;

    const rect = no.getBoundingClientRect();
    const dist = 140;
    let nx = rect.left + (Math.random() - 0.5) * dist * 2;
    let ny = rect.top + (Math.random() - 0.5) * dist * 2;
    const pad = 40;
    nx = Math.max(pad, Math.min(nx, window.innerWidth - rect.width - pad));
    ny = Math.max(pad, Math.min(ny, window.innerHeight - rect.height - pad));
    no.style.left = nx + 'px';
    no.style.top = ny + 'px';
  }

  window.addEventListener('load', () => {
    const rect = no.getBoundingClientRect();
    noWrapper.style.width = `${rect.width}px`;
    noWrapper.style.height = `${rect.height}px`;
    no.style.position = 'fixed';
    no.style.left = `${rect.left}px`;
    no.style.top = `${rect.top}px`;
    no.style.margin = '0';
  });

  document.addEventListener('mousemove', (e) => {
    const r = no.getBoundingClientRect();
    const cx = r.left + r.width / 2;
    const cy = r.top + r.height / 2;
    const d = Math.sqrt(Math.pow(e.clientX - cx, 2) + Math.pow(e.clientY - cy, 2));
    if (d < 90) teleport();
  });

  no.addEventListener('mouseover', teleport);

  yes.addEventListener('click', () => {
    card.classList.add('hidden');
    final.classList.remove('hidden');
    for(let i=0; i<100; i++) {
      setTimeout(() => {
        const h = document.createElement('div');
        h.innerHTML = '❤️';
        h.style.position = 'fixed';
        h.style.left = '50%';
        h.style.top = '50%';
        h.style.fontSize = Math.random() * 30 + 20 + 'px';
        h.style.pointerEvents = 'none';
        const a = Math.random() * Math.PI * 2;
        const v = Math.random() * 12 + 5;
        const tx = Math.cos(a) * v * 20;
        const ty = Math.sin(a) * v * 20;
        const anim = h.animate([
          { transform: 'translate(-50%, -50%) scale(0)', opacity: 1 },
          { transform: `translate(calc(-50% + ${tx}px), calc(-50% + ${ty}px)) scale(1.5)`, opacity: 0 }
        ], { duration: 1500, easing: 'ease-out' });
        document.body.appendChild(h);
        anim.onfinish = () => h.remove();
      }, i * 20);
    }
  });

  setInterval(() => {
    const h = document.createElement('div');
    h.innerHTML = '❤️';
    h.className = 'heart-bg';
    h.style.left = Math.random() * 100 + 'vw';
    h.style.fontSize = Math.random() * 20 + 15 + 'px';
    bg.appendChild(h);
    setTimeout(() => h.remove(), 6000);
  }, 400);
</script>
</body>
</html>
